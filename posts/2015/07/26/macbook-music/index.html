<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Music playback on machines with tiny storage - cat | grep</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="https://blog.catpipegrep.com/extra/favicon.ico" rel="icon">

<link rel="canonical" href="https://blog.catpipegrep.com/posts/2015/07/26/macbook-music/">

        <meta name="author" content="Kevin Mancuso" />
        <meta name="keywords" content="music,mpd,osxmpdkeys,subsonic" />
        <meta name="description" content="With the advent of solid state storage, the once massive drives of spinning rust that shipped in laptops got faster but tinier. While the advent of streaming services (Spotify, Google Music, Pandora, etc) solved this for most people, I’m a bit more traditional relying on my own library. I generally enjoy listening to music whilst working on the compute box, but I had three primary requirements: Not iTunes (are there non-muggles who like iTunes?) Leverages central storage for actual music data, as to not duplicate the data and save disk on workstation Allow for media control keys on the macbook keyboard to continue working. I wanted a solution for being on the local network and another when remote. Local Wanting a light weight solution, I decided to fall back on MPD controlled by NCMPCPP. The MPD instance on the macbook will get the metadata from a MPD instance on the NAS, and plays the FLACs natively from the NFS store on the NAS. Since the NAS has no soundcard, I configured the null audio output and it just hangs out scanning for new media and presents the database to the network. On the macbook I installed MPD via brew with the NFS option: brew install mpd --with-libnfs and configured MPD to act as a satellite with the following configs: music_directory &#34;nfs://nas.local/mnt/music/&#34; database { plugin &#34;proxy&#34; host &#34;nas.local&#34; } Now the local mpd/ncmpcpp plays all the flacs natively just fine from the NAS. But not having media keys were driving me crazy! When in doubt, just go to github and search for random projects to see if anyone already hacked something together. From there, I found osxmpdkeys. Once I pointed it to the local MPD instance, the media keys just magically started working! Simple service to capture keypress and send it to the daemon. Brilliant. Remote On the NAS I also run an instance of Subsonic for use on my phone, and for playback when I’m out and about doing computing things. I used Clementine, a thick client player, for a while for Subsonic playback but it was a little too heavy. Since I actually like the Subsonic web interface, all I had to do was launch BeardedSpice and now I had media keys. TODO If I end up doing more remote computing, I reckon I will set up Mopidy with a subsonic backend to maintain a consistant interface for playback. Also, BeardedSpice seems like a pretty squared away project so I may try writing a MPD handler." />

        <meta property="og:site_name" content="cat | grep" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Music playback on machines with tiny storage"/>
        <meta property="og:url" content="https://blog.catpipegrep.com/posts/2015/07/26/macbook-music/"/>
        <meta property="og:description" content="With the advent of solid state storage, the once massive drives of spinning rust that shipped in laptops got faster but tinier. While the advent of streaming services (Spotify, Google Music, Pandora, etc) solved this for most people, I’m a bit more traditional relying on my own library. I generally enjoy listening to music whilst working on the compute box, but I had three primary requirements: Not iTunes (are there non-muggles who like iTunes?) Leverages central storage for actual music data, as to not duplicate the data and save disk on workstation Allow for media control keys on the macbook keyboard to continue working. I wanted a solution for being on the local network and another when remote. Local Wanting a light weight solution, I decided to fall back on MPD controlled by NCMPCPP. The MPD instance on the macbook will get the metadata from a MPD instance on the NAS, and plays the FLACs natively from the NFS store on the NAS. Since the NAS has no soundcard, I configured the null audio output and it just hangs out scanning for new media and presents the database to the network. On the macbook I installed MPD via brew with the NFS option: brew install mpd --with-libnfs and configured MPD to act as a satellite with the following configs: music_directory &#34;nfs://nas.local/mnt/music/&#34; database { plugin &#34;proxy&#34; host &#34;nas.local&#34; } Now the local mpd/ncmpcpp plays all the flacs natively just fine from the NAS. But not having media keys were driving me crazy! When in doubt, just go to github and search for random projects to see if anyone already hacked something together. From there, I found osxmpdkeys. Once I pointed it to the local MPD instance, the media keys just magically started working! Simple service to capture keypress and send it to the daemon. Brilliant. Remote On the NAS I also run an instance of Subsonic for use on my phone, and for playback when I’m out and about doing computing things. I used Clementine, a thick client player, for a while for Subsonic playback but it was a little too heavy. Since I actually like the Subsonic web interface, all I had to do was launch BeardedSpice and now I had media keys. TODO If I end up doing more remote computing, I reckon I will set up Mopidy with a subsonic backend to maintain a consistant interface for playback. Also, BeardedSpice seems like a pretty squared away project so I may try writing a MPD handler."/>
        <meta property="article:published_time" content="2015-07-26" />
            <meta property="article:section" content="misc" />
            <meta property="article:tag" content="music" />
            <meta property="article:tag" content="mpd" />
            <meta property="article:tag" content="osxmpdkeys" />
            <meta property="article:tag" content="subsonic" />
            <meta property="article:author" content="Kevin Mancuso" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.catpipegrep.com/theme/css/bootstrap.superhero.min.css" type="text/css"/>
    <link href="https://blog.catpipegrep.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blog.catpipegrep.com/theme/css/pygments/native.css" rel="stylesheet">
        <link href="https://blog.catpipegrep.com/theme/css/html4css1.css" rel="stylesheet">
        <link href="https://blog.catpipegrep.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.catpipegrep.com/theme/css/style.css" type="text/css"/>

        <link href="https://blog.catpipegrep.com/atom.xml" type="application/atom+xml" rel="alternate"
              title="cat | grep ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://blog.catpipegrep.com/" class="navbar-brand">
cat | grep            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/about/">About</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.catpipegrep.com/posts/2015/07/26/macbook-music/"
                       rel="bookmark"
                       title="Permalink to Music playback on machines with tiny storage">
                        Music playback on machines with tiny&nbsp;storage
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-07-26T12:30:43-05:00"> Sun 26 July 2015</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://blog.catpipegrep.com/tag/music.html">music</a>
        /
	<a href="https://blog.catpipegrep.com/tag/mpd.html">mpd</a>
        /
	<a href="https://blog.catpipegrep.com/tag/osxmpdkeys.html">osxmpdkeys</a>
        /
	<a href="https://blog.catpipegrep.com/tag/subsonic.html">subsonic</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>With the advent of solid state storage, the once massive drives of spinning rust that shipped in laptops got faster but tinier. While the advent of streaming services (Spotify, Google Music, Pandora, etc) solved this for most people, I&#8217;m a bit more traditional relying on my own library. I generally enjoy listening to music whilst working on the compute box, but I had three primary&nbsp;requirements:</p>
<ol class="arabic simple">
<li>Not iTunes (are there non-muggles who like&nbsp;iTunes?)</li>
<li>Leverages central storage for actual music data, as to not duplicate the data and save disk on&nbsp;workstation</li>
<li>Allow for media control keys on the macbook keyboard to continue&nbsp;working.</li>
</ol>
<p>I wanted a solution for being on the local network and another when&nbsp;remote.</p>
<div class="section" id="local">
<h2>Local</h2>
<p>Wanting a light weight solution, I decided to fall back on <a class="reference external" href="http://www.musicpd.org/"><span class="caps">MPD</span></a> controlled by <a class="reference external" href="http://ncmpcpp.rybczak.net/"><span class="caps">NCMPCPP</span></a>.  The <span class="caps">MPD</span> instance on the macbook will get the metadata from a <span class="caps">MPD</span> instance on the <span class="caps">NAS</span>, and plays the FLACs natively from the <span class="caps">NFS</span> store on the <span class="caps">NAS</span>.</p>
<p>Since the <span class="caps">NAS</span> has no soundcard, I configured the <a class="reference external" href="http://www.musicpd.org/doc/user/output_plugins.html">null audio output</a> and it just hangs out scanning for new media and presents the database to the&nbsp;network.</p>
<p>On the macbook I installed <span class="caps">MPD</span> via <a class="reference external" href="http://brew.sh/">brew</a> with the <span class="caps">NFS</span> option: <tt class="docutils literal">brew install mpd <span class="pre">--with-libnfs</span></tt> and configured <span class="caps">MPD</span> to act as a <a class="reference external" href="http://www.musicpd.org/doc/user/advanced_config.html#satellite">satellite</a> with the following&nbsp;configs:</p>
<pre class="literal-block">
music_directory &quot;nfs://nas.local/mnt/music/&quot;
database {
    plugin &quot;proxy&quot;
    host &quot;nas.local&quot;
}
</pre>
<p>Now the local mpd/ncmpcpp plays all the flacs natively just fine from the <span class="caps">NAS</span>. But not having media keys were driving me crazy! When in doubt, just go to github and search for random projects to see if anyone already hacked something together. From there, I found <a class="reference external" href="https://github.com/pushrax/osxmpdkeys">osxmpdkeys</a>. Once I pointed it to the local <span class="caps">MPD</span> instance, the media keys just magically started working! Simple service to capture keypress and send it to the daemon.&nbsp;Brilliant.</p>
</div>
<div class="section" id="remote">
<h2>Remote</h2>
<p>On the <span class="caps">NAS</span> I also run an instance of <a class="reference external" href="http://www.subsonic.org/">Subsonic</a> for use on my phone, and for playback when I&#8217;m out and about doing computing things. I used <a class="reference external" href="https://www.clementine-player.org/">Clementine</a>, a thick client player, for a while for Subsonic playback but it was a little too heavy. Since I actually like the Subsonic web interface, all I had to do was launch <a class="reference external" href="http://beardedspice.com/">BeardedSpice</a> and now I had media&nbsp;keys.</p>
</div>
<div class="section" id="todo">
<h2><span class="caps">TODO</span></h2>
<p>If I end up doing more remote computing, I reckon I will set up <a class="reference external" href="https://www.mopidy.com/">Mopidy</a> with a subsonic backend to maintain a consistant interface for playback. Also, BeardedSpice seems like a pretty squared away project so I may try writing a <span class="caps">MPD</span>&nbsp;handler.</p>
</div>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'catpipegrep'; // required: replace example with your forum shortname

                    var disqus_identifier = 'macbook-music';
                var disqus_url = 'https://blog.catpipegrep.com/posts/2015/07/26/macbook-music/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Kevin Mancuso
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://blog.catpipegrep.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.catpipegrep.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.catpipegrep.com/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'catpipegrep'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-47947008-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>